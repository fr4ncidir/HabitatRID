\section{serial.\+h File Reference}
\label{serial_8h}\index{serial.\+h@{serial.\+h}}
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$fcntl.\+h$>$}\\*
{\ttfamily \#include $<$termios.\+h$>$}\\*
{\ttfamily \#include $<$errno.\+h$>$}\\*
{\ttfamily \#include $<$inttypes.\+h$>$}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct {\bf serial\+\_\+options}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bf V\+E\+R\+B\+O\+SE}
\item 
\#define {\bf E\+R\+R\+OR}~-\/1
\item 
\#define {\bf N\+O\+\_\+\+P\+A\+C\+K\+ET}~-\/2
\item 
\#define {\bf N\+O\+\_\+\+P\+A\+R\+I\+TY}~0
\item 
\#define {\bf E\+V\+E\+N\+\_\+\+P\+A\+R\+I\+TY}~1
\item 
\#define {\bf O\+D\+D\+\_\+\+P\+A\+R\+I\+TY}~2
\item 
\#define {\bf T\+E\+R\+M\+I\+N\+A\+T\+O\+R\+\_\+\+R\+E\+A\+C\+H\+ED}~2
\item 
\#define {\bf O\+N\+E\+\_\+\+S\+T\+OP}~10
\item 
\#define {\bf T\+W\+O\+\_\+\+S\+T\+OP}~20
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct {\bf serial\+\_\+options} {\bf Serial\+Options}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int {\bf open\+\_\+serial} (const char name[$\,$], const {\bf Serial\+Options} options)
\item 
int {\bf read\+\_\+nbyte} (int file\+\_\+descriptor, size\+\_\+t fixed\+\_\+lenght, void $\ast$buffer)
\item 
int {\bf read\+\_\+nbyte\+\_\+packet} (int file\+\_\+descriptor, size\+\_\+t fixed\+\_\+length, void $\ast$buffer, uint8\+\_\+t start)
\item 
int {\bf read\+\_\+until\+\_\+terminator} (int file\+\_\+descriptor, size\+\_\+t max\+\_\+dim, void $\ast$buffer, uint8\+\_\+t terminator)
\item 
int {\bf write\+\_\+serial} (int file\+\_\+descriptor, size\+\_\+t length, void $\ast$buffer)
\item 
int {\bf send\+\_\+packet} (const int serial\+\_\+descriptor, const uint8\+\_\+t packet[$\,$], const size\+\_\+t dim, const char error\+\_\+msg[$\,$])
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{serial.\+h@{serial.\+h}!E\+R\+R\+OR@{E\+R\+R\+OR}}
\index{E\+R\+R\+OR@{E\+R\+R\+OR}!serial.\+h@{serial.\+h}}
\subsubsection[{E\+R\+R\+OR}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\+R\+R\+OR~-\/1}\label{serial_8h_a8fe83ac76edc595f6b98cd4a4127aed5}
\index{serial.\+h@{serial.\+h}!E\+V\+E\+N\+\_\+\+P\+A\+R\+I\+TY@{E\+V\+E\+N\+\_\+\+P\+A\+R\+I\+TY}}
\index{E\+V\+E\+N\+\_\+\+P\+A\+R\+I\+TY@{E\+V\+E\+N\+\_\+\+P\+A\+R\+I\+TY}!serial.\+h@{serial.\+h}}
\subsubsection[{E\+V\+E\+N\+\_\+\+P\+A\+R\+I\+TY}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\+V\+E\+N\+\_\+\+P\+A\+R\+I\+TY~1}\label{serial_8h_a30a963ff1432e4cfbdd83e74045ef142}
\index{serial.\+h@{serial.\+h}!N\+O\+\_\+\+P\+A\+C\+K\+ET@{N\+O\+\_\+\+P\+A\+C\+K\+ET}}
\index{N\+O\+\_\+\+P\+A\+C\+K\+ET@{N\+O\+\_\+\+P\+A\+C\+K\+ET}!serial.\+h@{serial.\+h}}
\subsubsection[{N\+O\+\_\+\+P\+A\+C\+K\+ET}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+O\+\_\+\+P\+A\+C\+K\+ET~-\/2}\label{serial_8h_a8ac4964a6cca903f40f29b27f71ef9a1}
\index{serial.\+h@{serial.\+h}!N\+O\+\_\+\+P\+A\+R\+I\+TY@{N\+O\+\_\+\+P\+A\+R\+I\+TY}}
\index{N\+O\+\_\+\+P\+A\+R\+I\+TY@{N\+O\+\_\+\+P\+A\+R\+I\+TY}!serial.\+h@{serial.\+h}}
\subsubsection[{N\+O\+\_\+\+P\+A\+R\+I\+TY}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+O\+\_\+\+P\+A\+R\+I\+TY~0}\label{serial_8h_a6e39c5c443322398878f10e0f1e6f023}
\index{serial.\+h@{serial.\+h}!O\+D\+D\+\_\+\+P\+A\+R\+I\+TY@{O\+D\+D\+\_\+\+P\+A\+R\+I\+TY}}
\index{O\+D\+D\+\_\+\+P\+A\+R\+I\+TY@{O\+D\+D\+\_\+\+P\+A\+R\+I\+TY}!serial.\+h@{serial.\+h}}
\subsubsection[{O\+D\+D\+\_\+\+P\+A\+R\+I\+TY}]{\setlength{\rightskip}{0pt plus 5cm}\#define O\+D\+D\+\_\+\+P\+A\+R\+I\+TY~2}\label{serial_8h_a898d7631f24dd6b1deebf808a2214ea2}
\index{serial.\+h@{serial.\+h}!O\+N\+E\+\_\+\+S\+T\+OP@{O\+N\+E\+\_\+\+S\+T\+OP}}
\index{O\+N\+E\+\_\+\+S\+T\+OP@{O\+N\+E\+\_\+\+S\+T\+OP}!serial.\+h@{serial.\+h}}
\subsubsection[{O\+N\+E\+\_\+\+S\+T\+OP}]{\setlength{\rightskip}{0pt plus 5cm}\#define O\+N\+E\+\_\+\+S\+T\+OP~10}\label{serial_8h_ac370b5ba27f9a0a5a6305b9feb8912ec}
\index{serial.\+h@{serial.\+h}!T\+E\+R\+M\+I\+N\+A\+T\+O\+R\+\_\+\+R\+E\+A\+C\+H\+ED@{T\+E\+R\+M\+I\+N\+A\+T\+O\+R\+\_\+\+R\+E\+A\+C\+H\+ED}}
\index{T\+E\+R\+M\+I\+N\+A\+T\+O\+R\+\_\+\+R\+E\+A\+C\+H\+ED@{T\+E\+R\+M\+I\+N\+A\+T\+O\+R\+\_\+\+R\+E\+A\+C\+H\+ED}!serial.\+h@{serial.\+h}}
\subsubsection[{T\+E\+R\+M\+I\+N\+A\+T\+O\+R\+\_\+\+R\+E\+A\+C\+H\+ED}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+E\+R\+M\+I\+N\+A\+T\+O\+R\+\_\+\+R\+E\+A\+C\+H\+ED~2}\label{serial_8h_a82c7b3539f404fa3aac74514cba97498}
\index{serial.\+h@{serial.\+h}!T\+W\+O\+\_\+\+S\+T\+OP@{T\+W\+O\+\_\+\+S\+T\+OP}}
\index{T\+W\+O\+\_\+\+S\+T\+OP@{T\+W\+O\+\_\+\+S\+T\+OP}!serial.\+h@{serial.\+h}}
\subsubsection[{T\+W\+O\+\_\+\+S\+T\+OP}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+W\+O\+\_\+\+S\+T\+OP~20}\label{serial_8h_a3e8ec491867ab0a8725c8315e832f323}
\index{serial.\+h@{serial.\+h}!V\+E\+R\+B\+O\+SE@{V\+E\+R\+B\+O\+SE}}
\index{V\+E\+R\+B\+O\+SE@{V\+E\+R\+B\+O\+SE}!serial.\+h@{serial.\+h}}
\subsubsection[{V\+E\+R\+B\+O\+SE}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+E\+R\+B\+O\+SE}\label{serial_8h_a42f8c497a1968074f38bf5055c650dca}
\doxyref{serial.\+h}{p.}{serial_8h} \begin{DoxyAuthor}{Author}
Francesco Antoniazzi 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+9 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
20 oct 2016 
\end{DoxyDate}


\subsection{Typedef Documentation}
\index{serial.\+h@{serial.\+h}!Serial\+Options@{Serial\+Options}}
\index{Serial\+Options@{Serial\+Options}!serial.\+h@{serial.\+h}}
\subsubsection[{Serial\+Options}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf serial\+\_\+options}  {\bf Serial\+Options}}\label{serial_8h_ade6fce17c7fb873847e3e098ede6efa8}
Serial\+Options\+: a simple struct for basic setups of serial port 

\subsection{Function Documentation}
\index{serial.\+h@{serial.\+h}!open\+\_\+serial@{open\+\_\+serial}}
\index{open\+\_\+serial@{open\+\_\+serial}!serial.\+h@{serial.\+h}}
\subsubsection[{open\+\_\+serial(const char name[], const Serial\+Options options)}]{\setlength{\rightskip}{0pt plus 5cm}int open\+\_\+serial (
\begin{DoxyParamCaption}
\item[{const char}]{name[$\,$], }
\item[{const {\bf Serial\+Options}}]{options}
\end{DoxyParamCaption}
)}\label{serial_8h_ac209470d5ede6c6eab4ec2ab75baa673}
open\+\_\+serial opens the serial port 
\begin{DoxyParams}{Parameters}
{\em name\mbox{[}$\,$\mbox{]}} & might be something like \char`\"{}/dev/tty\+A\+C\+M0\char`\"{} \\
\hline
{\em options} & is a setup for the serial port \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+OR or the serial file descriptor
\end{DoxyReturn}
\doxyref{serial.\+c}{p.}{serial_8c} \begin{DoxyAuthor}{Author}
Francesco Antoniazzi 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+9 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
20 oct 2016 
\end{DoxyDate}
\index{serial.\+h@{serial.\+h}!read\+\_\+nbyte@{read\+\_\+nbyte}}
\index{read\+\_\+nbyte@{read\+\_\+nbyte}!serial.\+h@{serial.\+h}}
\subsubsection[{read\+\_\+nbyte(int file\+\_\+descriptor, size\+\_\+t fixed\+\_\+lenght, void $\ast$buffer)}]{\setlength{\rightskip}{0pt plus 5cm}int read\+\_\+nbyte (
\begin{DoxyParamCaption}
\item[{int}]{file\+\_\+descriptor, }
\item[{size\+\_\+t}]{fixed\+\_\+lenght, }
\item[{void $\ast$}]{buffer}
\end{DoxyParamCaption}
)}\label{serial_8h_a447cbfffa2fc3978d73f7fed8579c6d6}
fixed\+\_\+read reads a certain number of bytes from the serial port 
\begin{DoxyParams}{Parameters}
{\em file\+\_\+descriptor} & is the identifier for the serial port \\
\hline
{\em fixed\+\_\+lenght} & is the exact number of bytes to be read \\
\hline
{\em buffer} & is the place to store the bytes read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+X\+I\+T\+\_\+\+F\+A\+I\+L\+U\+RE or E\+X\+I\+T\+\_\+\+S\+U\+C\+C\+E\+SS 
\end{DoxyReturn}
\index{serial.\+h@{serial.\+h}!read\+\_\+nbyte\+\_\+packet@{read\+\_\+nbyte\+\_\+packet}}
\index{read\+\_\+nbyte\+\_\+packet@{read\+\_\+nbyte\+\_\+packet}!serial.\+h@{serial.\+h}}
\subsubsection[{read\+\_\+nbyte\+\_\+packet(int file\+\_\+descriptor, size\+\_\+t fixed\+\_\+length, void $\ast$buffer, uint8\+\_\+t start)}]{\setlength{\rightskip}{0pt plus 5cm}int read\+\_\+nbyte\+\_\+packet (
\begin{DoxyParamCaption}
\item[{int}]{file\+\_\+descriptor, }
\item[{size\+\_\+t}]{fixed\+\_\+length, }
\item[{void $\ast$}]{buffer, }
\item[{uint8\+\_\+t}]{start}
\end{DoxyParamCaption}
)}\label{serial_8h_a6dbabe11cda341c97ce135951730d5cc}
read\+\_\+serial\+\_\+packet reads a packet from serial port. The packet is identified with a starting byte. So, while reading the first time, we ignore all is coming before this packet and then we start read packet-\/by-\/packet. The packet has a fixed lenght. 
\begin{DoxyParams}{Parameters}
{\em file\+\_\+descriptor} & is the identifier for the serial port \\
\hline
{\em fixed\+\_\+length} & is the exact number of bytes to be read \\
\hline
{\em buffer} & is the place to store the bytes read \\
\hline
{\em start} & is the starting byte of the packet \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+X\+I\+T\+\_\+\+F\+A\+I\+L\+U\+RE, E\+X\+I\+T\+\_\+\+S\+U\+C\+C\+E\+SS or N\+O\+\_\+\+P\+A\+C\+K\+ET 
\end{DoxyReturn}
\index{serial.\+h@{serial.\+h}!read\+\_\+until\+\_\+terminator@{read\+\_\+until\+\_\+terminator}}
\index{read\+\_\+until\+\_\+terminator@{read\+\_\+until\+\_\+terminator}!serial.\+h@{serial.\+h}}
\subsubsection[{read\+\_\+until\+\_\+terminator(int file\+\_\+descriptor, size\+\_\+t max\+\_\+dim, void $\ast$buffer, uint8\+\_\+t terminator)}]{\setlength{\rightskip}{0pt plus 5cm}int read\+\_\+until\+\_\+terminator (
\begin{DoxyParamCaption}
\item[{int}]{file\+\_\+descriptor, }
\item[{size\+\_\+t}]{max\+\_\+dim, }
\item[{void $\ast$}]{buffer, }
\item[{uint8\+\_\+t}]{terminator}
\end{DoxyParamCaption}
)}\label{serial_8h_a5813b5c5b7d9df7a73f8f94a072131cd}
reads the serial byte by byte, until it reaches max dimention of the buffer, or it reads the specified terminator. 
\begin{DoxyParams}{Parameters}
{\em file\+\_\+descriptor} & is the identifier for the serial port \\
\hline
{\em max\+\_\+dim} & is the maximum size of the storage buffer \\
\hline
{\em buffer} & is the storage buffer \\
\hline
{\em terminator} & is the stop-\/read byte \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+OR or the number of bytes read, terminator included 
\end{DoxyReturn}
\index{serial.\+h@{serial.\+h}!send\+\_\+packet@{send\+\_\+packet}}
\index{send\+\_\+packet@{send\+\_\+packet}!serial.\+h@{serial.\+h}}
\subsubsection[{send\+\_\+packet(const int serial\+\_\+descriptor, const uint8\+\_\+t packet[], const size\+\_\+t dim, const char error\+\_\+msg[])}]{\setlength{\rightskip}{0pt plus 5cm}int send\+\_\+packet (
\begin{DoxyParamCaption}
\item[{const int}]{serial\+\_\+descriptor, }
\item[{const uint8\+\_\+t}]{packet[$\,$], }
\item[{const size\+\_\+t}]{dim, }
\item[{const char}]{error\+\_\+msg[$\,$]}
\end{DoxyParamCaption}
)}\label{serial_8h_a35b1a29004265c3fe5382c05f3e1a69e}
Sends an array of characters to a serial port. If it fails, it prints an error message 
\begin{DoxyParams}{Parameters}
{\em serial\+\_\+descriptor} & the descriptor of the serial port \\
\hline
{\em packet} & the array containing the packet \\
\hline
{\em dim} & usually is packet\+\_\+dimension\+\_\+in\+\_\+bytes$\ast$sizeof(uint8\+\_\+t) \\
\hline
{\em error\+\_\+msg} & a string containing an error message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+X\+I\+T\+\_\+\+S\+U\+C\+C\+E\+SS or E\+X\+I\+T\+\_\+\+F\+A\+I\+L\+U\+RE 
\end{DoxyReturn}
\index{serial.\+h@{serial.\+h}!write\+\_\+serial@{write\+\_\+serial}}
\index{write\+\_\+serial@{write\+\_\+serial}!serial.\+h@{serial.\+h}}
\subsubsection[{write\+\_\+serial(int file\+\_\+descriptor, size\+\_\+t length, void $\ast$buffer)}]{\setlength{\rightskip}{0pt plus 5cm}int write\+\_\+serial (
\begin{DoxyParamCaption}
\item[{int}]{file\+\_\+descriptor, }
\item[{size\+\_\+t}]{length, }
\item[{void $\ast$}]{buffer}
\end{DoxyParamCaption}
)}\label{serial_8h_a34a63cbd02a65557836241d342e8e63d}
write\+\_\+serial writes to a serial port previously opened a precise number of bytes. 
\begin{DoxyParams}{Parameters}
{\em file\+\_\+descriptor} & is the identifier for the serial port \\
\hline
{\em length} & is the length of the item to be sent out \\
\hline
{\em buffer} & is a pointer to the item to be sent out \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+X\+I\+T\+\_\+\+F\+A\+I\+L\+U\+RE or E\+X\+I\+T\+\_\+\+S\+U\+C\+C\+E\+SS 
\end{DoxyReturn}
